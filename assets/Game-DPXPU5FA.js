import{j as e,f as R,u as $,r as a}from"./index-Ddr18cLa.js";function A({handleStartGame:n,t:l}){return e.jsx("div",{className:"p-2 w-full transition-all duration-200 flex justify-center items-center min-h-[calc(100vh-142px)] mx-auto text-black dark:text-gray-200 ",children:e.jsxs("div",{className:"md:w-3/4 sm:w-4/5 w-full gap-12 flex-col flex justify-center items-center",children:[e.jsxs("div",{className:"md:text-xl text-lg",children:[e.jsxs("div",{className:"",children:[e.jsx("p",{className:"md:text-7xl text-5xl font-bold float-left mr-2 leading-none",children:l("game_description_1")[0]}),e.jsx("p",{className:"align-text-top",children:l("game_description_1").slice(1)})]}),e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("p",{className:"md:text-5xl text-3xl font-bold float-left mr-2 leading-none",children:l("game_description_2").slice(0,2)}),e.jsx("p",{className:"align-text-top",children:l("game_description_2").slice(2,l("game_description_2").length)})]}),e.jsx("br",{}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"md:text-7xl text-5xl font-bold float-left mr-2 leading-none",children:l("game_description_3")[0]}),e.jsx("p",{className:"align-text-top",children:l("game_description_3").slice(1)})]}),e.jsx("br",{}),e.jsx("p",{className:"font-bold md:text-3xl text-xl text-center",children:l("game_description_4")})]}),e.jsx("button",{onClick:n,type:"button",className:"dark:text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br text-3xl focus:ring-4 focus:outline-none focus:ring-green-300 text-gray-800 dark:focus:ring-green-800 font-medium rounded-lg px-12 py-4 text-center me-4 mb-4",children:l("start")})]})})}function E({t:n,timeLeft:l,correctAnswers:i,quizQuestions:f,formatTime:o}){const u=R();return e.jsxs("div",{className:"mt-2 p-2 text-lg text-center",children:[e.jsx("p",{children:n("game_over")}),e.jsxs("p",{children:[n("time_spent"),": ",o(600-l)]}),e.jsxs("p",{children:[n("score"),": ",i," / ",f.length]}),e.jsx("div",{children:e.jsx("button",{className:"m-2 p-2 bg-cyan-500 text-white rounded",onClick:()=>u("/results"),children:n("see_results")})}),e.jsx("button",{className:"m-2 p-2 bg-blue-500 text-white rounded",onClick:()=>window.location.reload(),children:n("play_again")}),e.jsx("button",{className:"m-2 p-2 bg-gray-500 text-white rounded",onClick:()=>u("/home"),children:n("home")})]})}function T(){const{t:n,i18n:l}=$(),[i,f]=a.useState([]),[o,u]=a.useState({}),[g,N]=a.useState(!1),[p,v]=a.useState(600),[w,S]=a.useState(null),[d,_]=a.useState(!1),[k,y]=a.useState(0),C=t=>t.sort(()=>.5-Math.random()).slice(0,20).map(s=>({...s,options:s.options.sort(()=>.5-Math.random()).slice(0,4)})),I=async t=>{try{const r=await(await fetch(`/developing-game/locales/${t}/questions.json`)).json(),m=C(r);f(m)}catch(s){console.error("Ошибка при загрузке вопросов:",s)}};a.useEffect(()=>{d||I(l.language)},[l.language,d]),a.useEffect(()=>{if(d){const t=setInterval(()=>{v(s=>s<=1?(clearInterval(t),b(),0):s-1)},1e3);return S(t),()=>clearInterval(t)}},[d]);const Q=(t,s)=>{u(r=>({...r,[t]:s}))},b=()=>{clearInterval(w),N(!0);let t=0;i.forEach((x,h)=>{o[h]===x.correct&&t++}),y(t);const s=i.length,r=i.map((x,h)=>({question:n(x.question),selected:o[h]||"",correct:x.correct,isCorrect:o[h]===x.correct})),m=new Date().toLocaleString(),c=JSON.parse(localStorage.getItem("quizResults"))||[];c.push({results:r,index:c.length,score:t,totalQuestions:s,timestamp:m,timeSpent:600-p}),localStorage.setItem("quizResults",JSON.stringify(c))},j=t=>{const s=Math.floor(t/60),r=t%60;return`${s}:${r<10?"0":""}${r}`},G=()=>{_(!0)};return e.jsxs("div",{className:"bg-purple-200 dark:bg-indigo-400 transition-all duration-200 p-8 w-full",children:[!d&&e.jsx(A,{t:n,handleStartGame:G}),d&&e.jsxs("div",{className:"w-full min-h-[calc(100vh-142px)] sm:w-5/6 md:w-4/5 lg:w-3/4 xl:w-2/3 transition-all duration-200 mx-auto text-black dark:text-gray-200 bg-purple-300 dark:bg-indigo-700",children:[e.jsx("div",{className:"p-4 text-lg text-right dark:text-white text-black font-bold",children:j(p)}),e.jsxs("div",{className:"mt-3 lg:text-lg text-sm sm:text-base pb-4 max-h-[calc(100vh-300px)] min-h-40 custom-scrollbar overflow-y-auto",children:[i.map((t,s)=>e.jsxs("div",{className:"mb-4 p-4",children:[e.jsx("h3",{className:"font-bold mb-2",children:n(t.question)}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.options.map((r,m)=>{let c="bg-gray-200";return g?r===t.correct?c="bg-green-400":r===o[s]&&(c="bg-red-400"):o[s]===r&&(c="bg-blue-400"),e.jsx("button",{className:`${c} text-xs sm:text-sm lg:text-base text-black p-2 rounded`,onClick:()=>Q(s,r),disabled:g,children:r},m)})})]},s)),e.jsx("div",{className:"w-full flex justify-around items-center",children:e.jsx("button",{className:"mt-4 bg-amber-500 py-3 text-lg px-8 rounded-2xl",onClick:b,disabled:g,children:n("submit")})})]}),g&&e.jsx(E,{timeLeft:p,correctAnswers:k,quizQuestions:i,formatTime:j,t:n})]})]})}export{T as default};
